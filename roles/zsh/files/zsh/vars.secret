#!/usr/bin/env zsh

MY_ACCOUNT="my.1password.com"
RAFT_ACCOUNT=$(op read --account $MY_ACCOUNT "op://Personal/Raft Items/raftllc-account")

export OPENAI_API_KEY=$(op read --account $MY_ACCOUNT "op://Personal/Openai/Project Key")
export OTEL_EXPORTER_OTLP_API_KEY=$(op read --account $MY_ACCOUNT "op://HomeLab/OpenMonitor/password")
if command -v tailscale >/dev/null 2>&1 && tailscale ip -4 >/dev/null 2>&1; then
  export OTEL_EXPORTER_OTLP_LOGS_ENDPOINT=$(op read --account $MY_ACCOUNT "op://HomeLab/OpenMonitor/tailscale_url")
else
  export OTEL_EXPORTER_OTLP_LOGS_ENDPOINT=$(op read --account $MY_ACCOUNT "op://HomeLab/OpenMonitor/local_url")
fi
export OTEL_EXPORTER_OTLP_ENDPOINT="$OTEL_EXPORTER_OTLP_LOGS_ENDPOINT"
export OTEL_EXPORTER_OTLP_HEADERS="Authorization=Bearer $OTEL_EXPORTER_OTLP_API_KEY"
export OTEL_EXPORTER_OTLP_LOGS_HEADERS="$OTEL_EXPORTER_OTLP_HEADERS"
# export ANTHROPIC_API_KEY=$(op read --account $MY_ACCOUNT "op://Raft/Claude Code API Key/credential")
export SONAR_TOKEN=$(op read --account $MY_ACCOUNT "op://Raft/Sonarcube Cloud/credential")
export GHP_USERNAME=$(op read --account $MY_ACCOUNT "op://Personal/GitHub/username")
export GHP_SECRET=$(op read --account $MY_ACCOUNT "op://Personal/GitHub/token_write-packages")
export GITHUB_TOKEN=$(op read --account $MY_ACCOUNT "op://Personal/GitHub/token")
# export AWS_ACCESS_KEY_ID=$(op read --account $MY_ACCOUNT "op://Raft/AWS/ACCESS_KEY_ID")
# export AWS_SECRET_ACCESS_KEY=$(op read --account $MY_ACCOUNT "op://Raft/AWS/SECRET_ACCESS_KEY")
# export AWS_SESSION_TOKEN=$(op read --account $MY_ACCOUNT "op://Raft/AWS/SESSION_TOKEN")
